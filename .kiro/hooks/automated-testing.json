{
  "name": "Automated Testing on Code Changes",
  "description": "Automatically runs relevant tests when source code is modified",
  "version": "1.0.0",
  "trigger": {
    "type": "file_change",
    "patterns": [
      "src/**/*.py",
      "tests/**/*.py",
      "pyproject.toml"
    ],
    "exclude_patterns": [
      "**/__pycache__/**",
      "**/*.pyc",
      ".mypy_cache/**"
    ]
  },
  "conditions": {
    "branch_patterns": ["main", "feature/*", "bugfix/*"],
    "file_size_limit": "10MB"
  },
  "actions": [
    {
      "name": "Run Unit Tests",
      "command": "uv run pytest tests/unit/ -v --tb=short",
      "timeout": 300,
      "required": true,
      "on_failure": "stop"
    },
    {
      "name": "Run Integration Tests",
      "command": "uv run pytest tests/integration/ -v --tb=short -m 'not billable'",
      "timeout": 600,
      "required": true,
      "on_failure": "continue"
    },
    {
      "name": "Check Test Coverage",
      "command": "uv run pytest --cov=src --cov-report=term-missing --cov-fail-under=85",
      "timeout": 300,
      "required": false,
      "on_failure": "warn"
    }
  ],
  "notifications": {
    "on_success": {
      "message": "All tests passed successfully! ✅",
      "include_summary": true
    },
    "on_failure": {
      "message": "Test failures detected. Please review and fix. ❌",
      "include_logs": true,
      "include_failed_tests": true
    }
  },
  "metadata": {
    "created_by": "Kiro Agent Hook System",
    "created_date": "2024-01-15",
    "last_modified": "2024-01-15",
    "tags": ["testing", "quality", "automation"]
  }
}